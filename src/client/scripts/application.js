var Hierarchical={hasChildView:function(t){return t.includes(" ")?this.hasGrandChildView(t):null!=this.getChildView(t)},hasGrandChildView:function(t){let e=t.split(" "),i=this;for(let t=0;t<e.length;t++)if(i=i.getChildView(e[t]),null==i)return!1;return null!=i},hasParentView:function(t){return!!this.$el.hasClass(t)||(this.parent&&this.parent.hasParentView?this.parent.hasParentView(t):!(!this.options.parent||!this.options.parent.hasParentView)&&this.options.parent.hasParentView(t))},hasParentViewById:function(t){return this.$el.attr("id")==t||(this.parent&&this.parent.hasParentViewById?this.parent.hasParentViewById(t):!(!this.options.parent||!this.options.parent.hasParentViewById)&&this.options.parent.hasParentViewById(t))},hasAncestorView:function(t){let e=t.split(" "),i=this;for(let t=0;t<e.length;t++)if(i=i.getParentView(e[t]),null==i)return!1;return null!=i},getChildView:function(t){return t.includes(" ")?this.getGrandChildView(t):this.hasRegion(t)?this.getRegion(t).currentView:void 0},getGrandChildView:function(t){let e=t.split(" "),i=this;for(let t=0;t<e.length;t++)if(i=i.getChildView(e[t]),null==i)return null;return i},getParentView:function(t){return this.$el.hasClass(t)?this:this.parent&&this.parent.getParentView?this.parent.getParentView(t):this.options.parent&&this.options.parent.getParentView?this.options.parent.getParentView(t):void 0},getParentViewById:function(t){return this.$el.attr("id")==t?this:this.parent&&this.parent.getParentViewById?this.parent.getParentViewById(t):this.options.parent&&this.options.parent.getParentViewById?this.options.parent.getParentViewById(t):void 0},gasAncestorView:function(t){let e=t.split(" "),i=this;for(let t=0;t<e.length;t++)if(i=i.getParentView(e[t]),null==i)return null;return i},getTopView:function(){let t=this;for(;t.parent||t.options.parent;)t.parent?t=t.parent:t.options.parent&&(t=t.options.parent);return t}};function getName(){return window.navigator.userAgent.indexOf("Edge")>-1?"Edge":navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf(".NET")>-1?"Explorer":navigator.userAgent.indexOf("Chrome")>-1?"Chrome":navigator.userAgent.indexOf("Firefox")>-1?"Firefox":navigator.userAgent.indexOf("Safari")>-1?"Safari":void 0}function getDevice(){let t=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(t)||/iPhone/.test(t)&&!window.MSStream||/iPod/.test(t)&&!window.MSStream?"phone":/iPad/.test(t)&&!window.MSStream?"tablet":/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(t)||/Mobile/.test(t)?$(window).width()<480||$(window).height()<480?"phone":"tablet":"desktop"}function isTouchEnabled(){return"desktop"!=getDevice()||window.PointerEvent&&navigator.maxTouchPoints>1}function isMobile(){let t=getDevice();return"phone"==t||"tablet"==t}function getOsType(){let t=navigator.userAgent||navigator.vendor||window.opera;return t.indexOf("Windows")>-1?"windows":t.indexOf("Macintosh")>-1?"macintosh":t.indexOf("Linux")>-1?"linux":t.indexOf("Android")>-1?"android":t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1?"ios":void 0}function getMobileOS(){let t=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(t)?"Windows Phone":/android/i.test(t)?"Android":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"iOS":void 0}function supportsCors(){return"withCredentials"in new XMLHttpRequest||!!window.XDomainRequest}function supportsHTTPRequestUploads(){return window.XMLHttpRequest&&"upload"in new XMLHttpRequest}function supportsFormData(){return null!==window.FormData}var Browser={name:getName(),device:getDevice(),os_type:getOsType(),mobile_os:getMobileOS(),support_cors:supportsCors(),supports_http_request_uploads:supportsHTTPRequestUploads(),supports_form_data:supportsFormData(),is_mobile:isMobile(),is_touch_enabled:isTouchEnabled(),is_edge:window.navigator.userAgent.indexOf("Edge")>-1,is_explorer:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf(".NET")>-1,is_chrome:navigator.userAgent.indexOf("Chrome")>-1,is_firefox:navigator.userAgent.indexOf("Firefox")>-1,is_safari:navigator.userAgent.indexOf("Safari")>-1&&-1==navigator.userAgent.indexOf("Chrome"),sameDomain:function(t){let e=document.createElement("a");return e.href=t,location.hostname===e.hostname&&location.protocol===e.protocol},xFramesAllowed:function(t){for(let e=0;e<t.length;e++){let i=t[e].split(/:(.+)/);if(i.length>1){let t=i[0].toLowerCase(),e=i[1].trim();switch(t){case"x-frame-options":if(e=e.toLowerCase(),"sameorigin"==e||"deny"==e)return!1;break;case"access-control-allow-origin":if("*"!=e&&""!=e)return!1;break;case"x-xss-protection":case"content-security-policy":return!1}}}return!0},hideMobileKeyboard:function(){document.activeElement.blur()},download:function(t){if(!t)throw new Error("Browser::download: `urls` parameter is required.");if(void 0===document.createElement("a").download){let e=0;return function i(){let n=document.createElement("iframe");n.style.display="none",n.src=t[e++],document.documentElement.appendChild(n);let o=setInterval((()=>{"complete"!==n.contentWindow.document.readyState&&"interactive"!==n.contentWindow.document.readyState||(clearInterval(o),setTimeout((()=>{n.parentNode.removeChild(n)}),1e3),e<t.length&&i())}),100)}()}if(Array.isArray(t)){let e=0;t.forEach((t=>{if(this.is_firefox&&!this.sameDomain(t))return setTimeout(this.download.bind(null,t),100*++e);this.download(t)}))}else{let e=t,i=document.createElement("a");i.download="",i.href=e,i.dispatchEvent(new MouseEvent("click"))}}};!function(t){var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var a=o[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,(function(t,n){i[t]!=n&&(e[t]=n)})),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout((function(){"in"==i.hoverState&&i.show()}),i.options.delay.show)}},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout((function(){"out"==i.hoverState&&i.hide()}),i.options.delay.hide)}},e.prototype.show=function(){var i=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var o=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(r);d&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),c=s[0].offsetWidth,u=s[0].offsetHeight;if(d){var p=r,f=this.getPosition(this.$viewport);r="bottom"==r&&h.bottom+u>f.bottom?"top":"top"==r&&h.top-u<f.top?"bottom":"right"==r&&h.right+c>f.width?"left":"left"==r&&h.left-c<f.left?"right":r,s.removeClass(p).addClass(r)}var g=this.getCalculatedOffset(r,h,c,u);this.applyPlacement(g,r);var m=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(e.TRANSITION_DURATION):m()}},e.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=s&&(e.top=e.top+s-d);var h=this.getViewportAdjustedDelta(i,e,l,d);h.left?e.left+=h.left:e.top+=h.top;var c=/top|bottom/.test(i),u=c?2*h.left-o+l:2*h.top-s+d,p=c?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][p],c)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(i){var n=this,o=t(this.$tip),s=t.Event("hide.bs."+this.type);function a(){"in"!=n.hoverState&&o.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),i&&i()}if(this.$element.trigger(s),!s.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",a).emulateTransitionEnd(e.TRANSITION_DURATION):a(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=window.SVGElement&&i instanceof window.SVGElement,a=n?{top:0,left:0}:s?null:e.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,r,l,a)},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+n;r<a.top?o.top=a.top-r:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var d=e.left-s,h=e.left+s+i;d<a.left?o.left=a.left-d:h>a.right&&(o.left=a.left+a.width-h)}return o},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide((function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null}))};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each((function(){var n=t(this),o=n.data("bs.tooltip"),s="object"==typeof i&&i;!o&&/destroy|hide/.test(i)||(o||n.data("bs.tooltip",o=new e(this,s)),"string"==typeof i&&o[i]())}))},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery);var TooltipShowable={tooltip_title:"Tooltip",tooltip_trigger:"hover",tooltip_container:"#main",showTooltips:function(){this.tooltips&&this.tooltips.tooltip("show")},hideTooltips:function(){this.tooltips&&this.tooltips.tooltip("hide")},addTooltips:function(t){if(Browser.is_mobile)return;let e=this.tooltip_target?this.$el.find(this.tooltip_target):this.$el;this.tooltips=e.find('[data-toggle="tooltip"]'),this.tooltips.addClass("tooltip-trigger").tooltip(_.extend(this.options,{trigger:this.tooltip_trigger,container:this.tooltip_container},t))},removeTooltips:function(){$("body").find(".tooltip").remove()}},BaseView=Marionette.View.extend(_.extend({},Hierarchical,TooltipShowable,{initialize:function(){this.options.parent&&(this.parent=this.options.parent),Marionette.View.prototype.initialize.call(this)},isVisible:function(){return this.$el.is(":visible")},getRegionNames:function(){let t=[],e=Object.keys(this.regions);for(let i=0;i<e.length;i++)t.push(e[i]);return t},getRegionElement:function(t){if(this.hasRegion(t)){let e=this.getRegion(t);return e.getEl(e.el)}},getElementAttributes:function(t,e,i){return $.map(this.$el.find(t),(t=>{let n=$(t).attr(e);return i?i(n):n}))},setVisible:function(t){t?this.$el.show():this.$el.hide()},setVisibility:function(t,e){e?this.$el.find(t).show():this.$el.find(t).hide()},showRegions:function(){if(this.showRegion){let t=this.getRegionNames();for(let e=0;e<t.length;e++){let i=t[e];this.options.hidden&&!this.options.hidden[i]||this.showRegion(i)}}},showChildView:function(t,e,i){e&&(e.parent=this,Marionette.View.prototype.showChildView.call(this,t,e,i))},reflow:function(){return this.el.offsetHeight},update:function(){this.render()},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},block:function(t){t.preventDefault(),t.stopPropagation()},onDestroy:function(){this.removeTooltips()}})),Router=Backbone.Router.extend({routes:{"":"showWelcome",home:"showHome",main:"showMain","*address":"showInfo","#notfound":"showNotFound"},showWelcome:function(){Browser.is_mobile&&""==window.location.search?this.showHome():this.showMain()},showMain:function(){import("./main-split-view.js").then((t=>{application.show(new t.default,{full_screen:!0})}))},showHome:function(){this.showInfo("home")},showInfo:function(t){application.fetchTemplate(t,(e=>{application.show(new BaseView({template:_.template(e)}),{nav:t.contains("/")?t.split("/")[0]:t})}))},showNotFound:function(t){import("./not-found-view.js").then((e=>{application.show(new e.default(t))}))}}),Positioning={isFixed:function(){return"absolute"==this.$el.find(".modal-dialog").css("position")},savePosition:function(){let t=this.$el.find(".modal-dialog");this.offset=t.offset(),this.position=t.css("position"),this.left=t.css("left"),this.top=t.css("top")},fixPosition:function(){this.savePosition(),this.$el.css({display:"block"}),this.$el.find(".modal-dialog").css({position:"absolute",left:Math.round(this.offset.left),top:Math.round(this.offset.top)})},restorePosition:function(){this.$el.css({display:"flex"}),this.$el.find(".modal-dialog").css({position:this.position,left:this.left,top:this.top})},resetPosition:function(){this.$el.css({display:"flex"}),this.$el.find(".modal-dialog").css({position:"relative",left:"",top:"",margin:"auto"})}},Dragging={isDraggable:function(){return this.$el.find(".modal-header .handle").length>0},enableDrag:function(){this.$el.find(".modal-header").append($('<div class="handle">')),this.$el.find(".modal-dialog").draggable({handle:".modal-header",scroll:!1})},disableDrag:function(){this.$el.find(".modal-dialog").draggable("disable")},reenableDrag:function(){this.$el.find(".modal-dialog").draggable("enable")},onDragStart:function(){this.savePosition()},onDragStop:function(t){(t.clientX<0||t.clientX>$(window).width()||t.clientY<0||t.clientY>$(window).height())&&this.onDragOut(t),this.options.height||this.$el.find(".modal-dialog").css({height:""})},onDragOut:function(){this.restorePosition()}},Resizing={getDefaultSize:function(){return this.size},enableResize:function(){this.$el.find(".modal-dialog").resizable({handles:"all",start:t=>{this.onResizeStart(t)},resize:t=>{this.onResize(t)},stop:t=>{this.onResizeStop(t)}})},saveSize:function(){let t=this.$el.find(".modal-dialog")[0].offsetWidth,e=this.$el.find(".modal-dialog")[0].offsetHeight;this.options.size=[t,e]},setSize:function(t){this.$el.find(".modal-dialog").css({width:t?t[0]:"",height:t?t[1]:""}),this.onResize()},resetSize:function(){this.setSize(this.getDefaultSize())},restoreSize:function(){this.setSize(this.options.size)},onResizeStart:function(){this.fixPosition(),this.$el.find(".modal-dialog").addClass("resized"),this.options.onResizeStart&&this.options.onResizeStart()},onResize:function(){this.options.onResize&&this.options.onResize()},onResizeStop:function(){this.options.onResizeStop&&this.options.onResizeStop()}};Array.prototype.clone=function(){return this.slice(0)},Array.prototype.remove=function(t){let e=this.indexOf(t);return-1!=e&&this.splice(e,1),this},Array.prototype.removeAll=function(t){let e=this.clone();for(let i=0;i<t.length;i++)e=e.remove(t[i]);return e},function(t){var e=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};function i(i,n){return this.each((function(){var o=t(this),s=o.data("bs.modal"),a=t.extend({},e.DEFAULTS,o.data(),"object"==typeof i&&i);s||o.data("bs.modal",s=new e(this,a)),"string"==typeof i?s[i](n):a.show&&s.show(n)}))}e.VERSION="3.3.7",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(i){var n=this,o=t.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){n.$element.one("mouseup.dismiss.bs.modal",(function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:i});o?n.$dialog.one("bsTransitionEnd",(function(){n.$element.trigger("focus").trigger(s)})).emulateTransitionEnd(e.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)})))},e.prototype.hide=function(i){i&&i.preventDefault(),i=t.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy((function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")}),this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy((function(t){27==t.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop((function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")}))},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(i){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy((function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;s?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),i&&i()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):a()}else i&&i()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=i,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(e){var n=t(this),o=n.attr("href"),s=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&e.preventDefault(),s.one("show.bs.modal",(function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",(function(){n.is(":visible")&&n.trigger("focus")}))})),i.call(s,a,this)}))}(jQuery);var DialogView=BaseView.extend(_.extend(Positioning,Dragging,Resizing,{className:"modal",size:void 0,Template:'\n\t\t<div class="modal-dialog">\n\t\t\t<div class="modal-content" tabindex="0">\n\t\t\t\t<%= content %>\n\t\t\t</div>\n\t\t</div>\n\t',modal:!0,draggable:!0,resizable:!1,attributes:{role:"dialog","data-backdrop":"static"},events:{"dblclick .modal-header .handle":"onDoubleClickHandle",keydown:"onKeyDown"},setIcon:function(t){this.$el.find(".modal-title i").attr("class",t)},setTitle:function(t){this.$el.find(".modal-title h1").text(t)},show:function(){$("body").append(this.render()),this.$el.modal({show:!0,keyboard:!1,backdrop:!1})},hide:function(){this.$el.modal("hide")},open:function(t){this.$el.addClass("opening"),this.$el.css("display","flex"),window.setTimeout((()=>{this.$el.removeClass("opening"),this.focus(),t&&t.done&&t.done()}),this.constructor.transitionDuration)},close:function(t){this.$el.addClass("closing"),window.setTimeout((()=>{this.destroy(),t&&t.done&&t.done()}),this.constructor.transitionDuration-100)},isClosing:function(){return this.$el.hasClass("closing")},focus:function(){this.$el.find(".modal-dialog").addClass("focused")},blur:function(){this.$el.find(".modal-dialog").removeClass("focused")},isFocused:function(){return this.$el.find(".modal-dialog").hasClass("focused")},getTemplate:function(){let t=this.templateContext?this.templateContext():{};return _.template(this.Template.replace("<%= content %>",this.template(t)))},render:function(){let t=BaseView.prototype.render.call(this);return this.buttons&&this.$el.find(".modal-header").prepend(this.buttons().render().$el),this.draggable&&!Browser.is_mobile&&this.enableDrag(),this.resizable&&!Browser.is_mobile&&this.enableResize(),this.options.width&&this.$el.find(".modal-dialog").css("width",this.options.width+"px"),this.options.height&&this.$el.find(".modal-dialog").css("height",this.options.height+"px"),this.$el.on("show.bs.modal",(t=>{this.onShow(t)})),this.$el.on("hide.bs.modal",(t=>{this.onHide(t)})),(this.maxHeight||this.options.maxHeight)&&this.$el.find(".modal-dialog").wrap($('<div class="modal-extents">').css({"min-height":this.maxHeight||this.options.maxHeight})),t},onShow:function(){this.opener&&this.opener.blur&&this.opener.blur();let t=Object.keys(this.regions);for(let e=0;e<t.length;e++){let i=this.getChildView(t[e]);i&&i.onShow&&i.onShow()}this.open({done:()=>{this.onShown()}})},onShown:function(){this.modal&&this.$el.addClass("backdrop"),this.$el.find(".modal-content").focus(),this.options.onShown&&this.options.onShown()},onHide:function(t){$("body").removeClass("modal-open"),$("body").css("padding-left",""),$("body").css("padding-right",""),this.close({done:()=>{this.onHidden()}}),t.preventDefault(),t.stopPropagation()},onHidden:function(){this.destroy(),this.options.onHidden&&this.options.onHidden()},onDoubleClickHandle:function(){this.resetPosition()},onKeyDown:function(t){t.stopPropagation()},onBeforeDestroy:function(){this.$el.remove(),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),this.options.onbeforedestroy&&this.options.onbeforedestroy()}}),{transitionDuration:300});
/*!
 * clipboard.js v1.6.0
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT Â© Zeno Rocha
 */!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=t()}}((function(){return function t(e,i,n){function o(a,r){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[a]={exports:{}};e[a][0].call(h.exports,(function(t){var i=e[a][1][t];return o(i||t)}),h,h.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){var n=9;if(Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}e.exports=function(t,e){for(;t&&t.nodeType!==n;){if(t.matches(e))return t;t=t.parentNode}}},{}],2:[function(t,e,i){function n(t,e,i,n){return function(i){i.delegateTarget=o(i.target,e),i.delegateTarget&&n.call(t,i)}}var o=t("./closest");e.exports=function(t,e,i,o,s){var a=n.apply(this,arguments);return t.addEventListener(i,a,s),{destroy:function(){t.removeEventListener(i,a,s)}}}},{"./closest":1}],3:[function(t,e,i){i.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},i.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||i.node(t[0]))},i.string=function(t){return"string"==typeof t||t instanceof String},i.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],4:[function(t,e,i){var n=t("./is"),o=t("delegate");e.exports=function(t,e,i){if(!t&&!e&&!i)throw new Error("Missing required arguments");if(!n.string(e))throw new TypeError("Second argument must be a String");if(!n.fn(i))throw new TypeError("Third argument must be a Function");if(n.node(t))return function(t,e,i){return t.addEventListener(e,i),{destroy:function(){t.removeEventListener(e,i)}}}(t,e,i);if(n.nodeList(t))return function(t,e,i){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,i)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,i)}))}}}(t,e,i);if(n.string(t))return function(t,e,i){return o(document.body,t,e,i)}(t,e,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(t,e,i){e.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var i=t.hasAttribute("readonly");i||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),i||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),o=document.createRange();o.selectNodeContents(t),n.removeAllRanges(),n.addRange(o),e=n.toString()}return e}},{}],6:[function(t,e,i){function n(){}n.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){function n(){o.off(t,n),e.apply(i,arguments)}var o=this;return n._=e,this.on(t,n,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,o=i.length;n<o;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],o=[];if(n&&e)for(var s=0,a=n.length;s<a;s++)n[s].fn!==e&&n[s].fn._!==e&&o.push(n[s]);return o.length?i[t]=o:delete i[t],this}},e.exports=n},{}],7:[function(t,e,i){!function(n,o){if(void 0!==i)o(e,t("select"));else{var s={exports:{}};o(s,n.select),n.clipboardAction=s.exports}}(this,(function(t,e){var i=function(t){return t&&t.__esModule?t:{default:t}}(e),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.resolveOptions(e),this.initSelection()}return o(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":n(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=s}))},{select:5}],8:[function(t,e,i){!function(n,o){if(void 0!==i)o(e,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var s={exports:{}};o(s,n.clipboardAction,n.tinyEmitter,n.goodListener),n.clipboard=s.exports}}(this,(function(t,e,i,n){function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var i="data-clipboard-"+t;if(e.hasAttribute(i))return e.getAttribute(i)}var a=o(e),r=o(i),l=o(n),d=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.resolveOptions(i),n.listenClick(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),d(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,l.default)(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new a.default({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return s("action",t)}},{key:"defaultTarget",value:function(t){var e=s("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return s("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,i=!!document.queryCommandSupported;return e.forEach((function(t){i=i&&!!document.queryCommandSupported(t)})),i}}]),e}(r.default);t.exports=h}))},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}));var ShareDialogView=DialogView.extend({className:"modal",icon:"fa fa-share",title:"Share By Link",template:_.template('\n\t\t<div class="modal-header error">\n\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n\t\t\t\t<i class="fa fa-close"></i>\n\t\t\t</button>\n\t\t\t<h1 id="modal-header-text">\n\t\t\t\t<i class="<%= icon %>"></i>\n\t\t\t\t<%= title %>\n\t\t\t</h1>\n\t\t</div>\n\t\t\n\t\t<div class="modal-body">\n\t\t\t<i class="icon fa fa-3x fa-share" style="float:left; margin-left:10px; margin-right:20px"></i>\n\t\t\t<a id="link" href="<%= link %>" style="word-break:break-all"><%= link %></a>\n\t\t</div>\n\t\t\n\t\t<div class="modal-footer">\n\t\t\t<button class="copy-link btn btn-primary" data-clipboard-target="#link">\n\t\t\t\t<i class="fa fa-copy"></i>Copy to Clipboard\n\t\t\t</button>\n\t\t\t<button id="cancel" class="btn btn" data-dismiss="modal">\n\t\t\t\t<i class="fa fa-close"></i>Cancel\n\t\t\t</button>\n\t\t</div>\n\t'),templateContext:function(){return{title:this.title,icon:this.icon,link:this.options.link}},onRender:function(){new Clipboard(".copy-link")}});function base(t){let e;return e=t.indexOf("?"),-1!=e&&(t=t.substr(0,e)),e=t.indexOf("#"),-1!=e&&(t=t.substr(0,e)),t}function fragment(t){if(t){return t.split("#")[1]}}var AddressBar={attributes:["location","base","fragment","hash","host","hostname","href","origin","pathname","port","protocol"],get:function(t){switch(t){case"location":return window.location.href;case"base":return base(window.location.href);case"fragment":return fragment(window.location.href);default:return window.location[t]}},set:function(t){window.history.replaceState(null,"",t)},push:function(t){window.history.pushState(null,"",t)},goto:function(t){window.location.href=t},clear:function(t){t&&t.silent?this.set("#"):this.goto("#")}},Url={encode:function(t){if(!t)return;let e=t;return e=e.replace(/%/g,"%25"),e=e.replace(/ /g,"%20"),e=e.replace(/`/g,"%60"),e=e.replace(/@/g,"%40"),e=e.replace(/#/g,"%23"),e=e.replace(/\$/g,"%24"),e=e.replace(/\^/g,"%5E"),e=e.replace(/&/g,"%26"),e=e.replace(/\*/g,"%2A"),e=e.replace(/\(/g,"%28"),e=e.replace(/\)/g,"%29"),e=e.replace(/\+/g,"%2B"),e=e.replace(/=/g,"%3D"),e=e.replace(/{/g,"%7B"),e=e.replace(/}/g,"%7D"),e=e.replace(/\[/g,"%5B"),e=e.replace(/]/g,"%5D"),e=e.replace(/\|/g,"%7C"),e=e.replace(/\\/g,"%5C"),e=e.replace(/:/g,"%3A"),e=e.replace(/;/g,"%3B"),e=e.replace(/"/g,"%22"),e=e.replace(/'/g,"%27"),e=e.replace(/</g,"%3C"),e=e.replace(/>/g,"%3E"),e=e.replace(/,/g,"%2C"),e=e.replace(/\?/g,"%3F"),e=e.replace(/\//g,"%2F"),e},encodeAll:function(t){let e=new Array(t.length);for(let i=0;i<t.length;i++)e[i]=this.encode(t[i]);return e},decode:function(t){if(!t)return;let e=t;return e=e.replace(/%20/g," "),e=e.replace(/%60/g,"`"),e=e.replace(/%40/g,"@"),e=e.replace(/%23/g,"#"),e=e.replace(/%24/g,"$"),e=e.replace(/%5E/g,"^"),e=e.replace(/%26/g,"&"),e=e.replace(/%2A/g,"*"),e=e.replace(/%2D/g,"-"),e=e.replace(/%2B/g,"+"),e=e.replace(/%3D/g,"="),e=e.replace(/%7B/g,"{"),e=e.replace(/%7D/g,"}"),e=e.replace(/%5B/g,"["),e=e.replace(/%5D/g,"]"),e=e.replace(/%7C/g,"|"),e=e.replace(/%5C/g,"\\"),e=e.replace(/%3A/g,":"),e=e.replace(/%3B/g,";"),e=e.replace(/%22/g,'"'),e=e.replace(/%27/g,"'"),e=e.replace(/%3C/g,"<"),e=e.replace(/%3C/g,">"),e=e.replace(/%2C/g,","),e=e.replace(/%3F/g,"?"),e=e.replace(/%2F/g,"/"),e=e.replace(/%25/g,"%"),e},decodeAll:function(t){let e=new Array(t.length);for(let i=0;i<t.length;i++)e[i]=this.decode(t[i]);return e},encodeText:function(t){if("string"==typeof t)return this.encode(t);if(1==t.length)return this.encode(t[0]);{let e="";for(let i=0;i<t.length;i++)e+=this.encode(t[i]),i<t.length-1&&(e+="%12");return e}},decodeText:function(t){let e=t.split("%"),i=[],n=1;i[n-1]=e[0];for(let t=1;t<e.length;t++){let o="%"+e[t].substring(0,2);"%12"==o?(n+=1,i[n-1]=e[t].substring(2,e[t].length)):i[n-1]+=this.decode(o)+e[t].substring(2,e[t].length)}return i},getHostname:function(t){let e;if(t)return e=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0],e=e.split(":")[0],e=e.split("?")[0],e},getHostUrl:function(t){let e;if(t)return t.startsWith("#")&&(t=application.getUrl()+"/"+t),t.indexOf("//")>-1?(e=t.split("//")[0]+"//",t=t.split("//")[1]):e="http://",t.indexOf("/")>-1&&(t=t.split("/")[0]),e+(t=(t=t.split(":")[0]).split("?")[0])}},QueryString={toObject:function(){return this.decode(this.get())},toTerms:function(t){return t.includes("#")&&(t=t.split("#")[0]),t.split("&")},exists:function(){return AddressBar.get("location").contains("?")},has:function(t,e){return null!=this.value(t,e)},get:function(){let t=AddressBar.get("location");if(t.contains("?")){let e=t.split("?");return e[e.length-1]}},value:function(t,e){let i;if(i=e&&e.queryString?e.queryString:this.get(),!i)return;let n=this.toTerms(i);for(let e=0;e<n.length;e++){let i=n[e],o=i.indexOf("="),s=i.substr(0,o),a=i.substr(o+1,i.length);if(t==s)return a}},values:function(t,e){let i,n=[];if(i=e&&e.queryString?e.queryString:this.get(),!i)return;let o=this.toTerms(i);for(let e=0;e<o.length;e++){let i=o[e],s=i.indexOf("="),a=i.substr(0,s),r=i.substr(s+1,i.length);a==t&&n.push(r)}return n},set:function(t){let e=AddressBar.get("base")+(t?"?"+t:"");AddressBar.set(e)},push:function(t){let e=AddressBar.get("base")+(t?"?"+t:"");AddressBar.push(e)},clear:function(){let t=AddressBar.get("location").split("?")[0];AddressBar.set(t)},add:function(t,e){if("string"!=typeof t)return void this.addAll(t);let i=this.toObject();i[t]=e,this.set(this.encode(i))},remove:function(t){if("string"!=typeof t)return void this.removeAll(t);let e=this.toObject();delete e[t],this.set(this.encode(e))},addAll:function(t){for(const e in t)this.add(e,t[e])},removeAll:function(t){for(const e in t)this.remove(e,t[e])},concat:function(t,e){return t&&""!=t&&e&&null!=e?t+"&"+e:t&&""!=t?t:e},encode:function(t){let e="";for(let i in t){let n=t[i];null!=n&&("string"!=typeof n&&(n=n.toString()),e=this.concat(e,i+"="+Url.encode(n)))}return e=e.replace(/%2C/g,","),e},decode:function(t){let e={};if(!t)return e;let i=this.toTerms(t);for(let t=0;t<i.length;t++){let n=i[t],o=n.indexOf("="),s=n.substr(0,o),a=n.substr(o+1,n.length);if(s.endsWith("[]")){let t=s.substring(0,s.length-2);e[t]?e[t].push(a):e[t]=[a]}else e[s]=a}return e}},HeaderView=BaseView.extend({className:"navbar navbar-expand-lg fixed-top",template:_.template('\n\t\t<a id="brand" href="#" id="brand" class="active navbar-brand">\n\t\t\t<img class="logo" src="<%= defaults.navbar.icon %>" />\n\t\t\t<%= defaults.navbar.title %>\n\t\t</a>\n\n\t\t<% if (defaults.navbar.navs) { %>\n\t\t<ul class="nav navbar-nav">\n\t\t\t<% let keys = Object.keys(defaults.navbar.navs); %>\n\t\t\t<% for (let i = 0; i < keys.length; i++) { %>\n\t\t\t<% let key = keys[i]; %>\n\t\t\t<% let item = defaults.navbar.navs[key]; %>\n\t\t\t<li class="<%= key %><% if (nav == key) {%> active <% } %>">\n\t\t\t\t<a href="<%= item.href %>">\n\t\t\t\t\t<i class="<%= item.icon %>"></i>\n\t\t\t\t\t<span class="hidden-xs"><%= item.text %></span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<% } %>\n\t\t</ul>\n\n\t\t<ul class="nav navbar-right">\n\t\t\t<button class="social link btn" data-toggle="tooltip" title="Share By Link" data-placement="left">\n\t\t\t\t<i class="fa fa-share"></i>\n\t\t\t\tShare\n\t\t\t</button>\n\t\t</ul>\n\t\t<% } %>\n\t'),events:{"click #brand":"onClickBrand","click .link":"onClickLink"},templateContext:function(){return{nav:this.options.nav}},onRender:function(){this.addTooltips()},showShareByLinkDialog:function(){application.show(new ShareDialogView({link:window.location}))},onClickBrand:function(t){t.preventDefault();let e=QueryString.value("dark");QueryString.clear(),QueryString.add("dark",e),application.router.showMain()},onClickLink:function(){this.showShareByLinkDialog()}}),MainView=BaseView.extend({id:"main",template:_.template('\n\t\t<div id="header"></div>\n\t\t<div id="content"></div>\n\t'),regions:{header:"#header",content:"#content"},onRender:function(){this.showHeader(),this.showContent()},showHeader:function(){this.showChildView("header",new HeaderView({nav:this.options?this.options.nav:void 0})),this.options&&this.options.done&&this.options.done()},showContent:function(){this.options.contentView&&this.showChildView("content",this.options.contentView)}}),FooterView=BaseView.extend({template:_.template('\n\t\t<div class="container">\n\t\t\t<a href="<%= defaults.application.organization.url%>" target="_blank"><img class="logo" src="<%= defaults.footer.logo %>" /></a>\n\t\t\t<p>\n\t\t\t\tCopyright &copy; <%= defaults.application.year %>\n\t\t\t\t<% if (defaults.application.department) { %>\n\t\t\t\t<a href="<%= defaults.application.department.url %>" target="_blank"><%= defaults.application.department.name %></a>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (defaults.application.organization) { %>\n\t\t\t\t<a href="<%= defaults.application.organization.url %>" target="_blank"><%= defaults.application.organization.name %></a>\n\t\t\t\t<% } %>\n\t\t\t\t<br />\n\n\t\t\t\t<% if (defaults.footer.links) { %>\n\t\t\t\t<% let keys = Object.keys(defaults.footer.links); %>\n\t\t\t\t<% for (i = 0; i < keys.length; i++) { %>\n\t\t\t\t<% let id = keys[i]; %>\n\t\t\t\t<% let text = defaults.footer.links[id].text; %>\n\t\t\t\t<% let href = defaults.footer.links[id].href; %>\n\n\t\t\t\t<% if (href) { %>\n\t\t\t\t<a id="<%= id %>" href="<%= href %>"><%= text %></a>\n\t\t\t\t<% } else { %>\n\t\t\t\t<a id="<%= id %>"><%= text %></a>\n\t\t\t\t<% } %>\n\n\t\t\t\t<% if (i != keys.length - 1) { %> | <% } %>\n\t\t\t\t<% } %>\n\t\t\t\t<% } %>\n\t\t\t</p>\n\t\t</div>\n\t')}),PageView=BaseView.extend({id:"page",template:_.template('\n\t\t<div id="header"></div>\n\t\t\n\t\t<div class="main container">\n\t\t\t<div class="content">\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="footer">\n\t\t\t<div id="footer"></div>\n\t\t</div>\n\t'),regions:{header:"#header",content:".content",footer:"#footer"},onRender:function(){this.$el.addClass(this.options.nav),this.showHeader(),this.showContent(),this.showFooter(),this.addLightBox()},showHeader:function(){this.showChildView("header",new HeaderView({nav:this.options?this.options.nav:void 0})),this.options&&this.options.done&&this.options.done()},showContent:function(){this.options.contentView&&this.showChildView("content",this.options.contentView)},showFooter:function(){this.showChildView("footer",new FooterView),this.options&&this.options.done&&this.options.done()},addLightBox:function(){import("./main.js").then((function(t){return t.j})).then((()=>{this.$el.find(".lightbox").fancybox({padding:0,margin:20,openEffect:"elastic",closeEffect:"elastic",type:"image",afterShow:function(){this.wrap.draggable(),this.wrap.closest(".fancybox-overlay").css({"overflow-x":"hidden","overflow-y":"hidden"})}})}))}}),ErrorDialogView=DialogView.extend({template:_.template('\n\t\t<div class="modal-header error">\n\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n\t\t\t\t<i class="fa fa-close"></i>\n\t\t\t</button>\n\t\t\t<h1 id="modal-header-text">\n\t\t\t\t<% if (icon) { %>\n\t\t\t\t<i class="<%= icon %>"></i>\n\t\t\t\t<% } else { %>\n\t\t\t\t<i class="fa fa-exclamation-circle"></i>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (title) { %>\n\t\t\t\t<%= title %>\n\t\t\t\t<% } else { %>\n\t\t\t\tError\n\t\t\t\t<% } %>\n\t\t\t</h1>\n\t\t</div>\n\t\t\n\t\t<div class="modal-body">\n\t\t\t<i class="error-icon fa fa-3x fa-exclamation-circle" style="float:left; margin-left:10px; margin-right:20px"></i>\n\t\t\t<p><%= message %></p>\n\t\t</div>\n\t\t\n\t\t<div class="modal-footer">\n\t\t\t<button id="ok" class="btn btn-primary" data-dismiss="modal">\n\t\t\t\t<i class="fa fa-check"></i>OK\n\t\t\t</button>\n\t\t</div>\n\t'),events:{"click #ok":"onClickOk"},templateContext:function(){return{title:this.options.title,icon:this.options.icon,message:this.options.message}},onClickOk:function(){this.options.accept&&this.options.accept()}}),NotifyDialogView=DialogView.extend({className:"focused modal notify-dialog",template:_.template('\n\t\t<div class="modal-header">\n\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n\t\t\t\t<i class="fa fa-close"></i>\n\t\t\t</button>\n\t\t\t<h1 id="modal-header-text">\n\t\t\t\t<% if (icon) { %>\n\t\t\t\t<i class="<%= icon %>"></i>\n\t\t\t\t<% } else { %>\n\t\t\t\t<i class="fa fa-info-circle"></i>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (title) { %>\n\t\t\t\t<%= title %>\n\t\t\t\t<% } else { %>\n\t\t\t\tNotification\n\t\t\t\t<% } %>\n\t\t\t</h1>\n\t\t</div>\n\t\t\n\t\t<div class="modal-body">\n\t\t\t<p><%= message %></p>\n\t\t</div>\n\t\t\n\t\t<div class="modal-footer">\n\t\t\t<button id="ok" class="btn btn-primary" data-dismiss="modal">\n\t\t\t\t<i class="fa fa-check"></i>OK\n\t\t\t</button>\n\t\t</div>\n\t'),events:{"click #ok":"onClickOk"},templateContext:function(){return{title:this.options.title,icon:this.options.icon,message:this.options.message}},onClickOk:function(){this.options.accept&&this.options.accept()}}),ConfirmDialogView=DialogView.extend({className:"focused modal confirm-dialog",template:_.template('\n\t\t<div class="modal-header">\n\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n\t\t\t\t<i class="fa fa-close"></i>\n\t\t\t</button>\n\t\t\t<h1 id="modal-header-text">\n\t\t\t\t<% if (icon) { %>\n\t\t\t\t<i class="<%= icon %>"></i>\n\t\t\t\t<% } else { %>\n\t\t\t\t<i class="fa fa-question-circle"></i>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (title) { %>\n\t\t\t\t<%= title %>\n\t\t\t\t<% } else { %>\n\t\t\t\tConfirm\n\t\t\t\t<% } %>\n\t\t\t</h1>\n\t\t</div>\n\t\t\n\t\t<div class="modal-body">\n\t\t\t<i class="alert-icon fa fa-3x fa-question-circle" style="float:left; margin-left:10px; margin-right:20px"></i>\n\t\t\t<p><%= message %></p>\n\t\t</div>\n\t\t\n\t\t<div class="modal-footer">\n\t\t\t<button id="ok" class="btn btn-primary" data-dismiss="modal"><i class="fa fa-check"></i>\n\t\t\t\t<% if (ok) { %><%= ok %><% } else { %>OK<% } %>\n\t\t\t</button>\n\t\t\t<button id="cancel" class="btn" data-dismiss="modal"><i class="fa fa-times"></i>\n\t\t\t\t<% if (cancel) { %><%= cancel %><% } else { %>Cancel<% } %>\n\t\t\t</button> \n\t\t</div>\n\t'),events:{"click #ok":"onClickOk","click #cancel":"onClickCancel"},templateContext:function(){return{icon:this.options.icon,title:this.options.title,message:this.options.message,ok:this.options.ok,cancel:this.options.cancel}},onClickOk:function(){if(this.options.accept)return this.options.accept()},onClickCancel:function(){this.options.reject&&this.options.reject()}}),DialogRenderable={showDialog:function(t,e){this.dialogView?(this.dialogView.close(),this.dialogView=null):(t.show(e),this.dialogView=t,this.dialogView.options.onbeforedestroy=()=>{this.dialogView=null})},showErrorDialog:function(t){this.showDialog(new ErrorDialogView(t))},showNotifyDialog:function(t){this.showDialog(new NotifyDialogView(t))},showConfirmDialog:function(t){this.showDialog(new ConfirmDialogView(t))},destroyDialogs:function(){this.dialogView&&(this.dialogView.destroy(),this.dialogView=null),this.pendingDialogView=null},hideDialogs:function(){this.dialogView&&(this.dialogView.hide(),this.dialogView=null),this.pendingDialogView=null}};let dateFormat=function(){let t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,n=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t};return function(o,s,a){let r=dateFormat;if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(o)||/\d/.test(o)||(s=o,o=void 0),o=o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");0!=a&&o.getTimezoneOffset()&&(o=new Date(o.getTime()-60*(new Date).getTimezoneOffset()*1e3)),"UTC:"===(s=String(r.masks[s]||s||r.masks.default)).slice(0,4)&&(s=s.slice(4),a=!0);let l=a?"getUTC":"get",d=o[l+"Date"](),h=o[l+"Day"](),c=o[l+"Month"](),u=o[l+"FullYear"](),p=o[l+"Hours"](),f=o[l+"Minutes"](),g=o[l+"Seconds"](),m=o[l+"Milliseconds"](),w=a?0:o.getTimezoneOffset(),y={d,dd:n(d),ddd:r.i18n.dayNames[h],dddd:r.i18n.dayNames[h+7],m:c+1,mm:n(c+1),mmm:r.i18n.monthNames[c],mmmm:r.i18n.monthNames[c+12],yy:String(u).slice(2),yyyy:u,h:p%12||12,hh:n(p%12||12),H:p,HH:n(p),M:f,MM:n(f),s:g,ss:n(g),l:n(m,3),L:n(m>99?Math.round(m/10):m),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:a?"UTC":(String(o).match(e)||[""]).pop().replace(i,""),o:(w>0?"-":"+")+n(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return s.replace(t,(function(t){return t in y?y[t]:t.slice(1,t.length-1)}))}}();dateFormat.masks={default:"ddd mmm dd yyyy h:MM TT",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,e){return dateFormat(this,t,e)},String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}))},String.prototype.capitalize=function(){return this.replace(/(^|\s)([a-z])/g,(function(t,e,i){return e+i.toUpperCase()}))},String.prototype.startsWith=function(t){let e=t.length;return t==this.substring(0,e)},String.prototype.endsWith=function(t){let e=this.length-t.length,i=this.length;return t==this.substring(e,i)},String.prototype.contains=function(t){return-1!=this.indexOf(t)},String.prototype.truncatedTo=function(t){return this.length>t?this.slice(0,t)+"...":this};var application$1=Marionette.Application.extend(_.extend({},DialogRenderable,{templates:"templates",region:{el:"body",replaceElement:!1},spinner:'\n\t\t<div class="spinner overlay">\n\t\t\t<div class="icon">\n\t\t\t\t<i class="fa fa-spinner fa-5x fa-spin"></i>\n\t\t\t</div>\n\t\t</div>\n\t',initialize:function(){$("body").attr("device",Browser.device),"phone"!=Browser.device&&"tablet"!=Browser.device||$("body").addClass("mobile"),window.application=this,this.router=new Router,QueryString.value("dark")&&this.setDarkMode(!0)},getURL:function(){return window.location.protocol+"//"+window.location.host+window.location.pathname},getChildView:function(t){return this.getView().getChildView(t)},getMapView:function(){return this.getView().getChildView("content").getChildView("mainbar")},start:function(){Marionette.Application.prototype.start.call(this),this.initialize(),Backbone.history.start()},fetchTemplate(t,e){fetch(this.templates+"/"+t+".tpl").then((t=>{if(!t.ok)throw t;return t.text()})).then((t=>{e(t)})).catch((t=>{this.router.showNotFound(t)}))},setDarkMode:function(t){t?$("body").addClass("dark"):$("body").removeClass("dark")},show:function(t,e){t instanceof DialogView?this.showDialog(t,e):e&&e.full_screen?this.showView(new MainView({contentView:t,nav:e?e.nav:void 0})):this.showView(new PageView({contentView:t,nav:e?e.nav:void 0}))},showSpinner:function(){$("body").append(this.spinner)},hideSpinner:function(){$("body").find(".spinner.overlay").remove()},update:function(){this.reset(),this.getView("body").getChildView("header").currentView&&this.getView("body").getChildView("header").currentView.render()}})),application$2=Object.freeze({__proto__:null,default:application$1});export{BaseView as B,DialogView as D,FooterView as F,QueryString as Q,ShareDialogView as S,Browser as a,application$2 as b};